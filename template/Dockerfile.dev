# Development Dockerfile for React/Vite application
FROM node:22.14.0-alpine

# Set working directory
WORKDIR /app

# Install curl for healthcheck
RUN apk add --no-cache curl

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm install --force --loglevel verbose

# Copy source code
COPY . .

# Expose the port from environment variable (defaults to 5173)
EXPOSE ${VITE_PORT:-5173}

# Set environment variables for development
ENV NODE_ENV=development
ENV CHOKIDAR_USEPOLLING=true

# Start the development server with host and port from environment variables
CMD npm run dev -- --host ${VITE_HOST:-0.0.0.0} --port ${VITE_PORT:-5173}
